<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wichteln üéÑ</title>

    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: "Arial", sans-serif;
            background: url("https://images.unsplash.com/photo-1543589077-47d81606c1bf?q=80&w=1920&auto=format&fit=crop") no-repeat center center fixed;
            background-size: cover;
            color: white;
            text-align: center;
        }

        .container {
            margin-top: 140px;
            background: rgba(0,0,0,0.55);
            padding: 25px;
            border-radius: 15px;
            width: 90%;
            max-width: 450px;
            margin-left: auto;
            margin-right: auto;
        }

        input, button {
            width: 90%;
            padding: 12px;
            margin-top: 12px;
            border-radius: 10px;
            border: none;
            font-size: 16px;
        }

        button {
            background: #d62828;
            color: white;
            cursor: pointer;
        }

        button:hover {
            background: #b51f1f;
        }

        /* üéÖ Santa Animation */
        #santa {
            position: fixed;
            top: 40px;
            left: -300px;
            width: 250px;
            z-index: 1000;
            animation: flySanta 12s linear infinite;
        }

        @keyframes flySanta {
            0% { left: -350px; top: 60px; }
            50% { left: 50%; top: 90px; }
            100% { left: 120%; top: 40px; }
        }

        /* üí° Weihnachtslichterkette */
        .lights {
            position: fixed;
            top: 0;
            width: 100%;
            height: 70px;
           background: url("https://png.pngtree.com/png-clipart/20220726/original/pngtree-christmas-light-string-png-image_8395091.png") repeat-x;
            background-size: contain;
            z-index: 999;
            animation: blink 1.4s infinite;
        }

        @keyframes blink {
            0% { filter: brightness(1); }
            50% { filter: brightness(1.9); }
            100% { filter: brightness(1); }
        }
    </style>

</head>
<body>

    <!-- üí° Lichterkette -->
    <div class="lights"></div>

    <!-- üéÖ Santa fliegt -->
   <img id="santa" src="https://png.pngtree.com/png-clipart/20230919/original/pngtree-santa-claus-riding-on-reindeer-sleigh-png-image_12208703.png" alt="Santa">

    <div class="container">
        <h1>üéÅ Wichteln</h1>

        <input id="name" type="text" placeholder="Dein Name">
        <input id="address" type="text" placeholder="Deine Adresse">

        <button onclick="registerUser()">Eintragen</button>
        <button onclick="drawPerson()">Person ziehen</button>

        <p id="result"></p>
    </div>

    <script>
        async function registerUser() {
            let name = document.getElementById("name").value.trim();
            let address = document.getElementById("address").value.trim();

            if (!name || !address) {
                alert("Bitte Name und Adresse eingeben!");
                return;
            }

            let res = await fetch("/api/register", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ name, address })
            });

            let data = await res.json();
            document.getElementById("result").innerText = data.message;
        }

        async function drawPerson() {
            let name = document.getElementById("name").value.trim();

            if (!name) {
                alert("Bitte gib zuerst deinen Namen ein!");
                return;
            }

            let res = await fetch("/api/draw", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ name })
            });

            let data = await res.json();
            document.getElementById("result").innerText = data.message;
        }
    </script>

</body>
</html>
